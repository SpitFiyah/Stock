<!DOCTYPE html>
<html>
<head>
    <title>Target Triangulation Map</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { margin: 0; padding: 0; background-color: #0d1117; color: #c9d1d9; font-family: sans-serif; }
        #map { height: 80vh; width: 100%; border-bottom: 2px solid #30363d; }
        .header { padding: 20px; text-align: center; }
        .header h2 { margin: 0; color: #58a6ff; }
        .info { padding: 20px; text-align: center; font-size: 14px; }
    </style>
</head>
<body>

<div class="header">
    <h2><i class="fa-solid fa-crosshairs"></i> Target Triangulation Area</h2>
    <p>Connecting known operational points for case 0x8A9B</p>
</div>

<div id="map"></div>

<div class="info">
    <p><b>Point 1:</b> Pulse Medicare, Mohipora (Estimated Area)</p>
    <p><b>Point 2:</b> Govt. Degree College Kulgam (33.6477, 75.0095)</p>
    <p><b>Point 3:</b> Al Shameem Library near DC Office Kulgam (33.6445, 75.0192)</p>
    <p style="color: #ff7b72;"><b>Red Zone:</b> Primary calculated operational zone of target.</p>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // Initialize the map, centered roughly on Kulgam
    var map = L.map('map').setView([33.6460, 75.0140], 14);

    // Load dark-themed map tiles
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
        subdomains: 'abcd',
        maxZoom: 20
    }).addTo(map);

    // Coordinates for the 3 points
    var gdcKulgam = [33.647734, 75.009567];
    var dcOffice = [33.644560, 75.019230];
    var mohipora = [33.670000, 75.015000]; // Approximate 4km north-ish from center

    // Custom icons
    var blueIcon = new L.Icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png',
        shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34],
        shadowSize: [41, 41]
    });

    var redIcon = new L.Icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
        shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34],
        shadowSize: [41, 41]
    });

    // Add markers
    L.marker(gdcKulgam, {icon: blueIcon}).addTo(map).bindPopup("<b>Govt. Degree College Kulgam</b>");
    L.marker(dcOffice, {icon: blueIcon}).addTo(map).bindPopup("<b>Al Shameem Library (near DC Office)</b>");
    L.marker(mohipora, {icon: blueIcon}).addTo(map).bindPopup("<b>Pulse Medicare (Mohipora)</b><br>Approximate based on 4km radius");

    // Draw the triangulation polygon
    var latlngs = [gdcKulgam, dcOffice, mohipora];
    var polygon = L.polygon(latlngs, {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.2
    }).addTo(map);

    // Calculate centroid
    var centerLat = (gdcKulgam[0] + dcOffice[0] + mohipora[0]) / 3;
    var centerLng = (gdcKulgam[1] + dcOffice[1] + mohipora[1]) / 3;
    var centroid = [centerLat, centerLng];

    // Add center target marker
    L.marker(centroid, {icon: redIcon}).addTo(map)
        .bindPopup("<b>Calculated Triangulation Center</b><br>Primary Target Zone")
        .openPopup();

    // Fit map to polygon
    map.fitBounds(polygon.getBounds(), {padding: [50, 50]});
</script>

</body>
</html>